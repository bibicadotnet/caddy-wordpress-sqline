{$SERVER_NAME} {
	root * /var/www/html
	encode zstd gzip
	
	 @disallowed {
       path /xmlrpc.php
        path /wp-content/uploads/*.php
    }
    rewrite @disallowed /index.php

	# Serve WordPress PHP files through php-fpm:
	php_fastcgi wordpress:9000
	
	 @static {
        file
        path *.css *.js *.ico *.woff *.woff2
    }
    handle @static {
        header Cache-Control "public, max-age=31536000"
    }

    @static-img {
        file
        path *.gif *.jpg *.jpeg *.png *.svg *.webp *.avif
    }
    handle @static-img {
        header Cache-Control "public, max-age=31536000, immutable"
    }

	# Enable the static file server:
	file_server {
		precompressed gzip
		index index.html
	}

}
